<p><u><b></b></u></p><h1>DiscussionTopic Plugin - ​​​​Customization and Setup Guide</h1><p></p><p>This is an advanced plugin so it is advisable to read this guide as well as the setting screen notes before proceeding.&nbsp;</p><p>The plugin is designed to<u>&nbsp;automatically</u>&nbsp;add a Topic field to discussions. The goal is to customize the plugin so that related discussions will share the same topic. Once that goal is achieved, users browsing a discussion will be able to see the titles and links to the other related discussions in the plugin side panel.&nbsp;</p><p><u><b>Enabling the Side Panel</b></u>&nbsp;</p><p></p><ol><li>In "Roles and Permissions" enable the "View" permission for the user roles (Plugins.DiscussionTopic.View). Note that administrators are always authorized so it is advisable to customize and test the plugin first and only ​then enable it to users.&nbsp;</li><li>In the "Visibility Options" of the plugin customization screen ​specify the title of the side panel.&nbsp;</li><li>Use the "Module Sort" plugin to place the plugin's side panel close to the top. You will need the name of the plugin's side panel which is "DiscussionTopicModule". &nbsp;</li></ol>The side panel is only visible when there are other discussions that share the same topic as the current discussion. Thus, for best results&nbsp;you should first customize the topic ​construction&nbsp;options ​(see below) ​and then initialize the discussion table using the update option​ (also see below)​ before expecting to see side panel results.<br>&nbsp;<br>If your forum has Q&amp;A discussions with answers to&nbsp;frequently asked questions you may want to turn on the&nbsp;ability to mark discussions as "Top Topics". &nbsp;This allows authorized users (those with Manage permission in the plugin's "Roles and Permissions") to mark discussion&nbsp;topics as Top Topics. Such discussions will be pushed to the top of the side panel, providing users with easy visibility (and link)&nbsp;to answers.<br><p><u><b>Topic&nbsp;</b></u><u><b>​​</b></u><u><b>Construction</b></u></p><p></p><p><u>Manual Mode</u></p><p>The "Manual" construction mode (first option) should really be used with forums where automation is not needed. It disables automatic topic generation and assumes that ​administrators will manually add topics using the Option drop down menu (the "gear"). Obviously, this is only practical for a small number of discussions in special cases (e.g. Forum Help section). &nbsp; To enable this Options Menu (the "gear") you need to turn on it on (Visibility Options, option #4) as well as grant the Manage permission in Roles and Permissions (Plugins.DiscussionTopic.Manage).</p><p></p><p><u>Deterministic Mode</u></p><p>The Deterministic mode is useful in picking up common phrases entered with quotes. For example, the Vanilla forum has many discussions with "Something has gone wrong" in the title. In Deterministic mode this phrase will automatically be picked up as the topic so that the side panel will show discussions with this phrase.&nbsp; This allows moderators to create a discussion with the same topic that explains how to fix such issues (e.g.<i>&nbsp;How to fix "Something has gone wrong" issues</i>) and it will be added to the side panel. If it will also be marked as "Top Topic" this discussion&nbsp;will appear at the top of the list in&nbsp;the side panel (see "Top Topics" above).</p><p>What if the discussion title lacks double quoted phrases? You can use the plugin "Priority Phrases" area to specify words and phrases that when found in the discussion title, they would be picked up as the discussion topic. For example, after a quick look at the Vanilla forum discussions one could start with these priority phrases: &nbsp;<i>Something has gone wrong, advanced editor, recaptcha, Facebook, civil tongue, markup, ngix</i></p><p><u>Heuristic&nbsp;</u><u>​M</u><u>ode</u></p><p></p><p>The ​Heuristic mode is more complicated but offers the ability to create topics for unpredictable discussion titles. Because it is based on English language analysis of the titles, and because the analysis is an approximation of free form text, &nbsp;the results may be imperfect. However, in large forums that offer a large sample set, many shared topics will be discovered. To increase the hit ratio, the topic is constructed from word stems (word roots).&nbsp; For efficiency the stems are approximations rather than true word roots.&nbsp;<br></p><p>​<u>Progressive mode</u></p><p>The Progressive mode is a combination of the Deterministic and Heuristic modes. First the Deterministic mode is attempted and only if the topic cannot be derived in that mode the Heuristic mode is attempted. Even in Heuristic mode a topic may not be created (because of noise words, words of one character, numbers, etc.) &nbsp;​</p><p>​<u><b>Testing</b></u></p><p>Clearly, using the Heuristic or Progressive modes require some trial and error. The configuration screen has a special section for testing the resulting topic of a test title (note that the results reflect the saved settings so you should save before testing a title).&nbsp;</p><p>For a more realistic forum test you need to generate (or regenerate) the titles of saved discussions. The configuration screen "Table Update" section is designed for that purpose. To control the performance impact of multiple discussions update, the&nbsp;process is done in batches.&nbsp; The size of each batch is specified on the screen. You will be able to start with a small number and judge by the response time whether your server can handle larger batches. Note that the batch update process honors the categories setting of the plugin so that only those categories enabled for processing will be processed.&nbsp;</p><p>To see the resulting topics on the discussion list you will need to enable the&nbsp;"Display the discussion topic in the discussion list meta area"&nbsp;option.&nbsp;</p><p><b><u>Searching for Topics</u></b></p><p>When&nbsp;the Topic-Search menu option (enabled through customization) is clicked, a pop up form is displayed. &nbsp;It accepts a search argument which can be specified in free form by clicking on the "Search by Subject" button, or an exact topic text by clicking on the "Search by Topic" button. &nbsp; The Search by Subject option takes the entered free form string and internally converts it to the topic that would have been generated for a discussion by the specified text title, honoring the customization rules for topic generation. &nbsp; The resulting topic is then used to filter the discussion list. &nbsp;The search by topic is a more direct approach, but requires that the user guesses exactly what the generated topic would be. &nbsp; Searching by Subject is a convenient way to look for information in a non-exact way when the plugin configuration is set to Progressive mode. &nbsp; &nbsp;&nbsp;</p><p><b><u>Using the plugin with other languages</u></b></p><p>The Heuristic and Progressive modes use English language analysis. &nbsp;So if your forum is not in English your first mode of operation should be to set up the processing mode to "Deterministic". &nbsp; That enables the capturing of double-quoted texts as well as priority phrases in discussion titles -&nbsp;which is very useful. &nbsp;To enable Heuristic and Progressive&nbsp;modes in non-English languages you should follow these steps (each one will get you better results):&nbsp;</p><ol><li>Create your own set of "Noise Words". &nbsp; The master Noise Words list resides in the "/plugin/DiscussionTopic/locale/en-CA/definitions.php" and you should create a similar one in your plugin language locale. &nbsp; You can pick up language-specific noise lists from the internet (many databases use such lists) and format them to match the English version. &nbsp; Additionally, you can add few such words on the configuration screen.</li><li>The same locale file also contains some acronym definitions at the end. &nbsp;Add your own to the list as well as the configuration screen.<br>Once you are done with #1 and #2 above, you can test results with Heuristic/Progressive modes. &nbsp;Language analysis will be impaired, but noise words will be ignored leaving the rest to be picked up as the topic. &nbsp; For more accuracy proceed with the following steps.</li><li>Look at the&nbsp;PorterStemmer.php file in the plugin directory. &nbsp;It is a php routine that converts English words to their roots (stems). &nbsp;The algorithm is an approximation, sacrificing language accuracy for performance. &nbsp;The effect of the algorithm is to use word roots as the basis for topics. &nbsp;For example, in English, the Discussion titles "Failed Login" and "Failing Login" will both generate this topic: "login,fail", treating both "Failed" and "Failing" equivalently. &nbsp;&nbsp;<br>The quick and easy way to start is to change line 45 in the code by uncommenting it (Change "// return $word;" &nbsp;to " return $word;") which negates the stemming effect.&nbsp;Later, you can either find another open-source stemming algorithm for your language (Google Search word stemming for your language), or modify the PorterStemming file to handle your language. &nbsp; Remember - perfection is not necessary, the English algorithm itself is an approximation.</li><li>The last and most advanced step in language analysis is the sentence analysis.&nbsp;This is done by the&nbsp;PosTagger.php file in the plugin directory. &nbsp;It's goal is to categorize ("tag") sentence words into grammatical parts. &nbsp;The plugin only uses nouns and verbs, ignoring other sentence words. &nbsp;You can search the internet for a simple language analyzer&nbsp;for your own language. &nbsp;The analysis is done in the main plugin file () in the&nbsp;GetSubject() routine, in well commented areas. &nbsp;You can also disable the analysis by finding and uncommenting the "//$Partofspeech = "NN";" line.<br><br></li></ol><p><u><b>Performance Considerations</b></u></p><p>The plugin is designed to analyze and determine the topic<i>&nbsp;only when the discussion is saved</i>&nbsp;(for example, no such analysis is done when comments are added/edited or when the discussions lists are displayed. Furthermore, even when the analysis is done, it does not issue database queries, and the language analysis itself is done through approximation).&nbsp;</p><p>The searching for topics explained above as well as&nbsp;the filtering by topic&nbsp;should not have any performance impact. &nbsp;&nbsp;</p><p>When a process of saving<i>&nbsp;multiple discussions at a time</i>&nbsp;is initiated, that process may have some impact. Two examples come to mind - plugins that import RSS feeds into a forum category that is included in the categories processed by DiscussionTopic plugin, and of course the plugin Table Update process discussed above. For the RSS import you should consider not to include the category into which the feeds are added from DiscussionTopic processing. For the Table Update process you can reduce the batch size as explained above.&nbsp; Clearly, once you are satisfied with your customization options, until such time that you change the plugin topic generation options (e.g. changing Priority Phrases, including a new category), there is no reason to run the table update process again.&nbsp;<br></p>